<!DOCTYPE html><html lang="cn"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>第四章Dubbo扩展点加载机制 | 硅步千里</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">第四章Dubbo扩展点加载机制</h1><a id="logo" href="/.">硅步千里</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Start</i></a><a href="/archives/"><i class="fa fa-archive"> Archiv</i></a><a href="/about/"><i class="fa fa-user"> Über</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">第四章Dubbo扩展点加载机制</h1><div class="post-meta">Sep 23, 2019</div><a class="disqus-comment-count" data-disqus-identifier="2019/09/23/第四章Dubbo扩展点加载机制/" href="/2019/09/23/第四章Dubbo扩展点加载机制/#disqus_thread"></a><div class="post-content"><h1 id="4-1-扩展机制概述"><a href="#4-1-扩展机制概述" class="headerlink" title="4.1 扩展机制概述"></a>4.1 扩展机制概述</h1><h2 id="4-1-1-Java-Spi"><a href="#4-1-1-Java-Spi" class="headerlink" title="4.1.1 Java Spi"></a>4.1.1 Java Spi</h2><h3 id="实现步骤："><a href="#实现步骤：" class="headerlink" title="实现步骤："></a>实现步骤：</h3><ol>
<li>编写接口及实现类</li>
<li>在META-INF/services下创建具有接口全路径名的文件，文件内容为对应的实现类全路径名</li>
<li>编写调用类通过 ServiceLoader.load()获得对应的实例</li>
</ol>
<h2 id="4-1-2-Dubbo-Spi"><a href="#4-1-2-Dubbo-Spi" class="headerlink" title="4.1.2 Dubbo Spi"></a>4.1.2 Dubbo Spi</h2><h3 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h3><ol>
<li>编写接口类及实现类</li>
<li>在META-INF/services、META-INF/dubbo或者META/dubbo/internal下创建具有接口全路径名的文件，文件内容为一个键值对（对应实现实例名=对应的实现类全路径名）</li>
<li>编写调用类 通过ExtensionLoader.getExtensionLoader(接口名).getDefaultExteion()获得对应实例</li>
</ol>
<h3 id="Java-SPI-和-Dubbo-SPI的比较"><a href="#Java-SPI-和-Dubbo-SPI的比较" class="headerlink" title="Java SPI 和 Dubbo SPI的比较"></a>Java SPI 和 Dubbo SPI的比较</h3><ol>
<li>实例化，JavaSPI会一次性实例化所有实现，但是DubboSPI则会加载类但是会按需实例化实现</li>
<li>扩展失败，JavaSPI如果扩展失败，则无法获得扩展名称</li>
<li>DubboSPI增加了对于IoC和AOP的支持，一个扩展可以直接setter注入其他扩展 </li>
</ol>
<h2 id="4-1-3-Dubbo-的配置规范"><a href="#4-1-3-Dubbo-的配置规范" class="headerlink" title="4.1.3 Dubbo 的配置规范"></a>4.1.3 Dubbo 的配置规范</h2><table>
<thead>
<tr>
<th>规范名</th>
<th>规范说明</th>
</tr>
</thead>
<tbody><tr>
<td>SPI配置文件路径</td>
<td>META-INF/services/,META-INF/dubbo/,META-INF/dubbo/internal/</td>
</tr>
<tr>
<td>SPI配置文件名称</td>
<td>全路径类名</td>
</tr>
<tr>
<td>文件内容格式</td>
<td>key=value，换行符分隔</td>
</tr>
</tbody></table>
<h2 id="4-1-4-扩展点的分类与缓存"><a href="#4-1-4-扩展点的分类与缓存" class="headerlink" title="4.1.4 扩展点的分类与缓存"></a>4.1.4 扩展点的分类与缓存</h2><h3 id="扩展类的分类"><a href="#扩展类的分类" class="headerlink" title="扩展类的分类"></a>扩展类的分类</h3><h4 id="按照内容分类"><a href="#按照内容分类" class="headerlink" title="按照内容分类"></a>按照内容分类</h4><ol>
<li>Class缓存</li>
<li>实例缓存</li>
</ol>
<h4 id="按照扩展类种类分类"><a href="#按照扩展类种类分类" class="headerlink" title="按照扩展类种类分类"></a>按照扩展类种类分类</h4><ol>
<li>普通扩展类</li>
<li>包装扩展类：通用抽象，构造方法中会传入一个具体的实现</li>
<li>自适应扩展类：抽象扩展接口，具体实现在运行时由传入参数动态确定</li>
<li>其他缓存：如扩展类加载器缓存，扩展名缓存</li>
</ol>
<h3 id="扩展类缓存"><a href="#扩展类缓存" class="headerlink" title="扩展类缓存"></a>扩展类缓存</h3><table>
<thead>
<tr>
<th>集合名</th>
<th>缓存类型</th>
</tr>
</thead>
<tbody><tr>
<td>Holder&lt;Map&lt;String,Class&lt;?&gt;&gt;&gt; cachedClasses</td>
<td>普通扩展类缓存，不包括自适应扩展类和Wrapper类</td>
</tr>
<tr>
<td>Set&lt;Class&lt;?&gt;&gt; cachedWrapperClasses</td>
<td>Wrapper类缓存</td>
</tr>
<tr>
<td>Class&lt;?&gt; cachedAdaptiveClass</td>
<td>自适应扩展类缓存</td>
</tr>
<tr>
<td>CocurrentMap&lt;Class&lt;?&gt;,String&gt; cachedNames</td>
<td>扩展类与扩展名缓存</td>
</tr>
<tr>
<td>CocurrentMap&lt;Class<?>,ExtentionLoader<?>&gt; EXTENSION_LOADERS</td>
<td>扩展类与对应的扩展类加载器缓存</td>
</tr>
<tr>
<td>CocurrentMap&lt;Class&lt;?&gt;,Object&gt; EXTENSION_INSTANCES</td>
<td>扩展类与类初始化后的实例</td>
</tr>
<tr>
<td>Map&lt;String ,Activate&gt; cachedActivates</td>
<td>扩展名与@Activate的缓存</td>
</tr>
</tbody></table>
<h2 id="4-1-5-扩展点的特性"><a href="#4-1-5-扩展点的特性" class="headerlink" title="4.1.5 扩展点的特性"></a>4.1.5 扩展点的特性</h2><ol>
<li>自动包装：装饰器模式</li>
<li>自动加载：setter注入</li>
<li>自适应：@Adaptive参数匹配</li>
<li>自动激活： </li>
</ol>
<h1 id="4-2-扩展点注解"><a href="#4-2-扩展点注解" class="headerlink" title="4.2 扩展点注解"></a>4.2 扩展点注解</h1><h2 id="4-2-1-扩展点注解-SPI"><a href="#4-2-1-扩展点注解-SPI" class="headerlink" title="4.2.1 扩展点注解 @SPI"></a>4.2.1 扩展点注解 @SPI</h2><ol>
<li>使用范围： 可以用在类，接口，枚举类上</li>
<li>作用：标记SPI接口，运行时通过配置找到对应的实现类</li>
</ol>
<h2 id="4-2-2-扩展点自适应注解-Adaptive"><a href="#4-2-2-扩展点自适应注解-Adaptive" class="headerlink" title="4.2.2 扩展点自适应注解 @Adaptive"></a>4.2.2 扩展点自适应注解 @Adaptive</h2><ol>
<li>使用范围：可以使用类，接口，枚举类和方法上</li>
<li>作用：<ol>
<li>标记在类级别上：直接将整个类作为默认实现，不再自动生成匹配代码</li>
<li>标记在方法上：（会生成匹配代码，在匹配代码中）根据传入的指定Contant.key从url中提取参数进行匹配，最终生成指定的实现类</li>
</ol>
</li>
</ol>
<h2 id="4-2-3扩展点自动激活注解-Activate"><a href="#4-2-3扩展点自动激活注解-Activate" class="headerlink" title="4.2.3扩展点自动激活注解 @Activate"></a>4.2.3扩展点自动激活注解 @Activate</h2><h3 id="Active参数"><a href="#Active参数" class="headerlink" title="Active参数"></a>Active参数</h3><table>
<thead>
<tr>
<th>参数名</th>
<th>效果</th>
</tr>
</thead>
<tbody><tr>
<td>String[] group()</td>
<td>URL中的分组如果匹配则激活，则可以设置多个</td>
</tr>
<tr>
<td>String[] value()</td>
<td>查找URL中如果含有该key值，则激活</td>
</tr>
<tr>
<td>String[] before()</td>
<td>填写扩展点列表，表示哪些扩展点在本扩展点之前</td>
</tr>
<tr>
<td>String[] after()</td>
<td>表示哪些扩展点在本扩展点之后</td>
</tr>
<tr>
<td>int order()</td>
<td>整型，直接的排序信息</td>
</tr>
</tbody></table>
<h1 id="4-3-ExtensionLoader的工作原理"><a href="#4-3-ExtensionLoader的工作原理" class="headerlink" title="4.3 ExtensionLoader的工作原理"></a>4.3 ExtensionLoader的工作原理</h1><h2 id="4-3-1-工作流程"><a href="#4-3-1-工作流程" class="headerlink" title="4.3.1 工作流程"></a>4.3.1 工作流程</h2><h3 id="getExtension-String-name-的工作流程"><a href="#getExtension-String-name-的工作流程" class="headerlink" title="getExtension(String name)的工作流程"></a>getExtension(String name)的工作流程</h3><p>加载中的每一步都会先检查缓存中是否已经存在所需的数据</p>
<ol>
<li>框架读取SPI对应路径下的配置文件，根据配置加载所有扩展类并缓存（不初始化）</li>
<li>根据传入的名称初始化对应的类</li>
<li>尝试查找符合条件的包装类</li>
<li>返回对应的扩展类实例</li>
</ol>
<h2 id="getAdaptiveExtension-的工作流程"><a href="#getAdaptiveExtension-的工作流程" class="headerlink" title="getAdaptiveExtension()的工作流程"></a>getAdaptiveExtension()的工作流程</h2><ol>
<li>加载配置文件</li>
<li>生成自适应的类的代码字符串</li>
<li>获取类加载器和编译器，并用编译器编译刚才生成的代码字符串</li>
<li>返回对应的自适应实例</li>
</ol>
<h2 id="4-3-2-getExtension的工作原理"><a href="#4-3-2-getExtension的工作原理" class="headerlink" title="4.3.2 getExtension的工作原理"></a>4.3.2 getExtension的工作原理</h2><p>injectExtension()利用setter实现了一个简单的IoC，完成依赖注入</p>
<h2 id="4-3-3-getAdaptiveExtension的实现原理"><a href="#4-3-3-getAdaptiveExtension的实现原理" class="headerlink" title="4.3.3 getAdaptiveExtension的实现原理"></a>4.3.3 getAdaptiveExtension的实现原理</h2><p>getAdaptiveExtension的代码生成步骤</p>
<ol>
<li>生成package、import 、类名称等头部信息</li>
<li>遍历接口所有方法，获取方法的返回类型、参数类型、异常类型等</li>
<li>生产参数为空的空校验代码</li>
<li>生成默认实现类的名称</li>
<li>生成获取扩展点名称的代码</li>
<li>生成获取具体扩展实现类的代码</li>
<li>生成调用结果代码</li>
</ol>
<p>由以上自动代码产生的效果：<br>如果 SPI上备注了名称，Adaptive上也备注了名称，则会将SPI的名称作为默认名称，优先以Adaptive名称查找实现类，失败则使用SPI名称</p>
<h2 id="4-3-4-getActiveExtension的实现原理"><a href="#4-3-4-getActiveExtension的实现原理" class="headerlink" title="4.3.4 getActiveExtension的实现原理"></a>4.3.4 getActiveExtension的实现原理</h2><ol>
<li>检查缓存，如果缓存中没有，则初始化所有扩展类实现的集合</li>
<li>遍历@Activate集合，然后根据URL传入的匹配条件（group，name）等，得到所有符合激活条件的扩展类实现</li>
<li>遍历所有用户自定义扩展的名称，根据用户URL配置的顺序，调整扩展点激活顺序</li>
<li>返回所有自动激活类姬和</li>
</ol>
<p><strong>如果URL参数中传入了-default，则所有默认的@Activate都不会被激活，只有URL参数中指定的扩展点会被激活</strong></p>
<h2 id="4-3-5-ExtensionFactory的实现原理"><a href="#4-3-5-ExtensionFactory的实现原理" class="headerlink" title="4.3.5 ExtensionFactory的实现原理"></a>4.3.5 ExtensionFactory的实现原理</h2><ol>
<li>Dubbo和Spring如何被打通？<br>通过Spring的上下文，在SpringExtensionFatory中提供了保存Spring的上下文的静态方法</li>
<li>AdaptiveExtensionFactory 在构造方法中缓存了所有的扩展类工程，并通过TreeSet排序，SPI在前，Spring在后</li>
</ol>
<h1 id="4-4-扩展点动态编译的实现"><a href="#4-4-扩展点动态编译的实现" class="headerlink" title="4.4 扩展点动态编译的实现"></a>4.4 扩展点动态编译的实现</h1><h2 id="4-4-1总体结构"><a href="#4-4-1总体结构" class="headerlink" title="4.4.1总体结构"></a>4.4.1总体结构</h2><h3 id="Dubbo中的三种编译器"><a href="#Dubbo中的三种编译器" class="headerlink" title="Dubbo中的三种编译器"></a>Dubbo中的三种编译器</h3><ol>
<li>JDK编译器</li>
<li>Javassist编译器</li>
<li>AdaptiveCompiler编译器</li>
</ol>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><ol>
<li>@SPI注解的默认的编译器是javassist；想改变默认编译器，可以通过&lt;dubbo:application compiler=”jdk”&gt;进行配置</li>
<li>@Adaptive注解的默认编译器是AdaptiveCompiler</li>
</ol>
<h3 id="AdaptiveCompiler的主要抽象逻辑"><a href="#AdaptiveCompiler的主要抽象逻辑" class="headerlink" title="AdaptiveCompiler的主要抽象逻辑"></a>AdaptiveCompiler的主要抽象逻辑</h3><ol>
<li>通过正则匹配出包路径、类名，再根据包路径、类名拼接处全路径类名</li>
<li>尝试通过Class.forName加载该类并返回，防止重复编译</li>
<li>调用doCompile进行编译</li>
</ol>
<h2 id="4-4-2-Javassist动态代码编译"><a href="#4-4-2-Javassist动态代码编译" class="headerlink" title="4.4.2 Javassist动态代码编译"></a>4.4.2 Javassist动态代码编译</h2><p>Javassist动态编译步骤</p>
<ol>
<li>初始化Javassist，设置默认参数</li>
<li>通过正则匹配出所有import的包，并使用Javassist添加import</li>
<li>通过正则匹配出所有extends的包，创建Class对象，并使用Javassist添加extends</li>
<li>通过正则匹配出所有implements的包，并使用Javassist添加implements</li>
<li>通过正则匹配出类面的所有内容，即得到{}中的内容，再通过正则匹配出所有方法，并使用Javassist添加类内容</li>
<li>生成Class对象</li>
</ol>
<h2 id="4-4-3-JDK动态代码编译"><a href="#4-4-3-JDK动态代码编译" class="headerlink" title="4.4.3 JDK动态代码编译"></a>4.4.3 JDK动态代码编译</h2><p>主要流程：</p>
<ol>
<li>初始化JavaFileObject对象，传入代码字符串，</li>
<li>调用JavaCompiler.CompilationTask编译出具体的类</li>
<li>JavaFileMananer负责管理类文件的输入和输出位置</li>
</ol>
<p>接口与类介绍</p>
<ol>
<li>JavaFileObject接口。字符串代码被包装成一个文件对象，并提供二进制流的接口</li>
<li>JavaFileManager接口。主要管理文件的输入输出位置。</li>
<li>JavaCompiler.CompilationTask把JavaFileObject编译成具体的类</li>
</ol>
</div><div class="tags"><a href="/tags/dubbo/">-dubbo</a></div><div class="post-nav"><a class="pre" href="/2019/09/23/常见的动态代理的库及使用/">常见的动态代理的库及使用</a><a class="next" href="/2019/09/21/springBoot启动过程/">springBoot启动过程</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论（请确保 Disqus 可以正常加载）</button></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'http://yoursite.com/2019/09/23/第四章Dubbo扩展点加载机制/';
    this.page.identifier = '2019/09/23/第四章Dubbo扩展点加载机制/';
    this.page.title = '第四章Dubbo扩展点加载机制';
  };</script><script type="text/javascript" id="disqus-lazy-load-script">$.ajax({
url: 'https://disqus.com/next/config.json',
timeout: 2500,
type: 'GET',
success: function(){
  var d = document;
  var s = d.createElement('script');
  s.src = '//yuriy.disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  (d.head || d.body).appendChild(s);
  $('.disqus_click_btn').css('display', 'none');
},
error: function() {
  $('.disqus_click_btn').css('display', 'block');
}
});</script><script type="text/javascript" id="disqus-click-load">$('.btn_click_load').click(() => {  //click to load comments
    (() => { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//yuriy.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
    $('.disqus_click_btn').css('display','none');
});</script><script type="text/javascript" id="disqus-count-script">$(function() {
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '//disqus.com/next/config.json', true);
     xhr.timeout = 2500;
     xhr.onreadystatechange = function () {
       if (xhr.readyState === 4 && xhr.status === 200) {
         $('.post-meta .post-comments-count').show();
         var s = document.createElement('script');
         s.id = 'dsq-count-scr';
         s.src = 'https://yuriy.disqus.com/count.js';
         s.async = true;
         (document.head || document.body).appendChild(s);
       }
     };
     xhr.ontimeout = function () { xhr.abort(); };
     xhr.send(null);
   });
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="http://yoursite.com"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Kategorien</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/计算机基础/" style="font-size: 15px;">计算机基础</a> <a href="/tags/算法竞赛进阶指南/" style="font-size: 15px;">算法竞赛进阶指南</a> <a href="/tags/学习日记/" style="font-size: 15px;">学习日记</a> <a href="/tags/Java基础复习/" style="font-size: 15px;">Java基础复习</a> <a href="/tags/面试准备/" style="font-size: 15px;">面试准备</a> <a href="/tags/装逼利器/" style="font-size: 15px;">装逼利器</a> <a href="/tags/每日任务/" style="font-size: 15px;">每日任务</a> <a href="/tags/算法/" style="font-size: 15px;">-算法</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/java基础/" style="font-size: 15px;">java基础</a> <a href="/tags/算法复习/" style="font-size: 15px;">算法复习</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/学习欲望/" style="font-size: 15px;">学习欲望</a> <a href="/tags/学习计划/" style="font-size: 15px;">学习计划</a> <a href="/tags/数据库基本操作/" style="font-size: 15px;">数据库基本操作</a> <a href="/tags/数据结构/" style="font-size: 15px;">数据结构</a> <a href="/tags/LeetCode/" style="font-size: 15px;">LeetCode</a> <a href="/tags/dubbo/" style="font-size: 15px;">-dubbo</a> <a href="/tags/spring/" style="font-size: 15px;">-spring</a> <a href="/tags/dubbo/" style="font-size: 15px;">dubbo</a> <a href="/tags/spring学习/" style="font-size: 15px;">-spring学习</a> <a href="/tags/计算机基础复习/" style="font-size: 15px;">计算机基础复习</a> <a href="/tags/工具复习/" style="font-size: 15px;">工具复习</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/10/10/acwing240/">acwing240</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/09/acwing885/">acwing885</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/08/acwing835/">acwing835</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/08/acwing831/">acwing831</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/07/acwing803/">acwing803</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/06/acwing292/">acwing292</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/06/acwing327/">acwing327</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/05/acwing797/">acwing797</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/05/acwing796/">acwing796</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/04/acwing795/">acwing795</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Letzte Kommentare</i></div><script type="text/javascript" src="//yuriy.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">硅步千里.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>